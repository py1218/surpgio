---
import { Image } from "astro:assets";
import { QUOTE, SITE_TITLE } from "@/consts";
---

<!-- Full-page background image -->
<div
  class="fixed inset-0 -z-10 bg-cover bg-center tracking-wide md:block"
  style="background-image:url('/surpgio_background.png');"
></div>

<section
  id="game"
  class="relative flex flex-col items-center justify-center w-full flex-1 min-h-[60vh] pt-4 pb-2 overflow-y-auto z-20"
>
  <!-- ── GAME WRAPPER ─────────────────────────────────────────── -->
  <div
    id="game-container"
    class="rounded shadow-lg w-full max-w-[960px] aspect-video box-border"
  >
    <iframe
      src="/build_test/index.html"
      allow="fullscreen; autoplay"
      loading="lazy"
      title="Sexy Unique RPG Web Demo"
      class="w-full h-full border-0"
    ></iframe>
  </div>

  <!-- ── CLOSED MESSAGE ──────────────────────────────────────── -->
  <div
    id="closed-message"
    class="hidden mt-6 text-center text-xl font-semibold text-white neon-pink"
  >
    Please come back during business hours (5&nbsp;–&nbsp;10 PM&nbsp;PT).
  </div>
</section>

<!-- ── BUSINESS-HOURS SWITCHER ──────────────────────────────── -->
<script type="module">
  // Returns true if the current time in America/Los_Angeles is 17:00-21:59
  function inBusinessHours() {
    const now = new Date();
    const ptHour = Number(
      new Intl.DateTimeFormat("en-US", {
        hour: "numeric",
        hour12: false,
        timeZone: "America/Los_Angeles",
      }).format(now)
    );
    return ptHour >= 17 && ptHour < 22;
  }

  const showGame = inBusinessHours();
  document.getElementById("game-container").style.display = showGame ? "" : "none";
  document.getElementById("closed-message").style.display = showGame ? "none" : "block";
</script>
